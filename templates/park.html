<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>{{park_data[0]["fullName"]}}</title>
    <link rel="stylesheet" href="../static/css/park_style.css">
  </head>
  <body>
    {% extends "template.html" %}
    {% block content %}
    <div id="spacing"></div>

    <div id="headerImg" style="background-image: url({{image}})">
        <div id="parkName">
            {{park_data[0]["fullName"]}} 
        </div>
    </div>
    <div id="titlebar">
        <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: black;">
            <a class="navbar-brand" id="titletext" href="#" onclick="changeVisibility('des');" data-toggle="collapse" data-target=".navbar-collapse.show">Park Information</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#menu" aria-controls="menu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="menu">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="#s" onclick="changeVisibility('camp');" data-toggle="collapse" data-target=".navbar-collapse.show">Campgrounds</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#" onclick="changeVisibility('articles');" data-toggle="collapse" data-target=".navbar-collapse.show">Articles</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#" onclick="changeVisibility('events');" data-toggle="collapse" data-target=".navbar-collapse.show">Events</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#" onclick="changeVisibility('news');" data-toggle="collapse" data-target=".navbar-collapse.show">News Releases</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#" onclick="changeVisibility('reading');" data-toggle="collapse" data-target=".navbar-collapse.show">Further Reading</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <div id="organizer">
        
        <div id="changinginfo">
            <div class="container" id="des">
                <div class="sectiontitle">Overview:</div>
                <div class="txtblock">
                        {{park_data[0]["description"]}}
                </div>
                <div class="txtblock">
                    {{park_data[0]["directionsInfo"]}}
                </div>
                <div id="spacing"></div>
                <div class="sectiontitle">Visitor Centers:</div>
                <div class="txtblock" id="vc"></div>
            </div>
    
            <div class="container" id="camp">
                <div class="sectiontitle">Campgrounds:</div>
                <div class="txtblock" id="campbody"></div>
            </div>

            <div class="container" id="articles">
                <div class="sectiontitle">Articles:</div>
                <div class="txtblock" id="articlesbody"></div>
            </div>

            <div class="container" id="events">
                <div class="sectiontitle">Events:</div>
                <div class="txtblock" id="eventsbody"></div>
            </div>

            <div class="container" id="news">
                <div class="sectiontitle">News:</div>
                <div class="txtblock" id="newsbody"></div>
            </div>

            <div class="container" id="reading">
                <div class="sectiontitle">Further Reading:</div>
                <div> LOREM IPSUM DOLOR SIT AMET</div>
            </div>
        </div>


        <div class="sidebar">
            <div class="sectiontitle">Alerts:</div>
            <div class="txtblock" id="alert"></div>
            <div class="sectiontitle">Operating Hours:</div>
            <div class="txtblock">
                <div class="tab"><b>Sunday: </b><span>{{oh_data[0]}}</span></div>
                <div class="tab"><b>Monday: </b><span>{{oh_data[1]}}</span></div>
                <div class="tab"><b>Tuesday: </b><span>{{oh_data[2]}}</span></div>
                <div class="tab"><b>Wednesday: </b><span>{{oh_data[3]}}</span></div>
                <div class="tab"><b>Thursday: </b><span>{{oh_data[4]}}</span></div>
                <div class="tab"><b>Friday: </b><span>{{oh_data[5]}}</span></div>
                <div class="tab"><b>Saturday: </b><span>{{oh_data[6]}}</span></div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var alert_data = {{ alert_data|tojson }};
        // var park_data = {{ park_data }};
        // var image = {{ image }};
        // var oh_data = {{oh_data}};
        // var vc_data = {{vc_data}};
        // var camp_data = {{camp_data}};
        // var article_data = {{article_data}};
        // var event_data = {{event_data}};
        // var news_data = {{news_data}};
    </script>
    <script type="text/javascript" src="../static/js/park.js"></script>
    <script>

        
        // VISITOR CENTERS
        var vcblock = document.createElement("div");
        if ( {{vc_data|tojson}}["total"] == 0)
        {
            var vctext = document.createTextNode("No visitor centers available at this park.");
            vcblock.appendChild(vctext);
        }
        else {
            for (i = 0; i < {{vc_data|tojson}}["total"]; i++)
            {
                // make title a link if there is extra data
                if ({{vc_data|tojson}}["data"][i]["directionsUrl"])
                {
                    var titlenode = document.createElement("a");
                    var vctitle = document.createTextNode({{vc_data|tojson}}["data"][i]["name"]);
                    titlenode.appendChild(vctitle);
                    titlenode.className = "boldtxtlink";
                    titlenode.setAttribute("href", {{vc_data|tojson}}["data"][i]["directionsUrl"]);
                }
                else{
                    var titlenode = document.createElement("div");
                    var vctitle = document.createTextNode({{vc_data|tojson}}["data"][i]["name"]);
                    titlenode.appendChild(vctitle);
                    titlenode.className = "boldtxt";
                }
                
                var textnode = document.createElement("div");
                var vctext = document.createTextNode({{vc_data|tojson}}["data"][i]["description"]);
                var textnode2 = document.createElement("div");
                var vctext2 = document.createTextNode({{vc_data|tojson}}["data"][i]["directionsInfo"]);
                textnode.className = "txtblock";
                textnode.appendChild(vctext);
                textnode2.appendChild(vctext2);

                vcblock.appendChild(titlenode);
                vcblock.appendChild(textnode);
                vcblock.appendChild(textnode2);
                var enter = document.createElement("br");
                vcblock.appendChild(enter);
            }
        }
        var element = document.getElementById("vc");
        element.appendChild(vcblock);

        // CAMPGROUNDS
        var campblock = document.createElement("div");
        if ( {{camp_data|tojson}}["total"] == 0)
        {
            var camptext = document.createTextNode("No campgrounds available at this park.");
            campblock.appendChild(camptext);
        }
        else {
            var weathernode = document.createElement("div");
            var weathertxt = document.createTextNode({{camp_data|tojson}}["data"][0]["weatheroverview"]);
            weathernode.appendChild(weathertxt);
            weathernode.className = "txtblock";
            campblock.appendChild(weathernode);

            if ({{camp_data|tojson}}["data"][0]["regulationsurl"])
            {
                var regulationsnode = document.createElement("div");
                var regulationstxt = document.createTextNode("Check out campsite regulations here: ");
                var regulationshref = document.createElement("a");
                var regulationsurl = document.createTextNode({{camp_data|tojson}}["data"][0]["regulationsurl"]);
                regulationshref.href = {{camp_data|tojson}}["data"][0]["regulationsurl"];
                regulationshref.appendChild(regulationsurl);
                regulationsnode.appendChild(regulationstxt);
                regulationsnode.appendChild(regulationshref);
                regulationsnode.className = "txtblock";
                campblock.appendChild(regulationsnode);
                var division = document.createElement("br");
                campblock.appendChild(division);
            }

            for (i = 0; i < {{camp_data|tojson}}["total"]; i++)
            {
                // make title a link if there is extra data
                if ({{camp_data|tojson}}["data"][i]["reservationsUrl"])
                {
                    var titlenode = document.createElement("a");
                    var camptitle = document.createTextNode({{camp_data|tojson}}["data"][i]["name"]);
                    titlenode.appendChild(camptitle);
                    titlenode.className = "boldtxtlink";
                    titlenode.setAttribute("href", {{camp_data|tojson}}["data"][i]["reservationsUrl"]);
                }
                else{
                    var titlenode = document.createElement("div");
                    var camptitle = document.createTextNode({{camp_data|tojson}}["data"][i]["name"]);
                    titlenode.appendChild(camptitle);
                    titlenode.className = "boldtxt";
                }
                
                var textnode = document.createElement("div");
                var camptext = document.createTextNode({{camp_data|tojson}}["data"][i]["description"]);
                textnode.className = "txtblock";
                textnode.appendChild(camptext);

                campblock.appendChild(titlenode);
                campblock.appendChild(textnode);
                var enter = document.createElement("br");
                campblock.appendChild(enter);
            }
        }
        var element = document.getElementById("campbody");
        element.appendChild(campblock);


        // ARTICLES
        var articleblock = document.createElement("div");
        console.log({{article_data|tojson}});
        if ( {{article_data|tojson}}["total"] == 0)
        {
            var articletext = document.createTextNode("No articles available for this park.");
            articleblock.appendChild(articletext);
        }
        else {

            for (i = 0; i < {{article_data|tojson}}["data"].length; i++)
            {
                // make title a link if there is extra data
                if ({{article_data|tojson}}["data"][i]["url"])
                {
                    var titlenode = document.createElement("a");
                    var articletitle = document.createTextNode({{article_data|tojson}}["data"][i]["title"]);
                    titlenode.appendChild(articletitle);
                    titlenode.className = "boldtxtlink";
                    titlenode.setAttribute("href", {{article_data|tojson}}["data"][i]["url"]);
                }
                else{
                    var titlenode = document.createElement("div");
                    var articletitle = document.createTextNode({{article_data|tojson}}["data"][i]["title"]);
                    titlenode.appendChild(articletitle);
                    titlenode.className = "boldtxt";
                }
                
                var textnode = document.createElement("div");
                var articletext = document.createTextNode({{article_data|tojson}}["data"][i]["listingdescription"]);
                textnode.className = "txtblock";
                textnode.appendChild(articletext);

                articleblock.appendChild(titlenode);
                articleblock.appendChild(textnode);
                var enter = document.createElement("br");
                articleblock.appendChild(enter);
            }
        }
        var element = document.getElementById("articlesbody");
        element.appendChild(articleblock);

        // EVENTS
        var eventblock = document.createElement("div");
        console.log({{event_data|tojson}});
        if ( {{event_data|tojson}}["total"] == 0)
        {
            var eventtext = document.createTextNode("No events available for this park.");
            eventblock.appendChild(eventtext);
        }
        else {
            for (i = 0; i < {{event_data|tojson}}["data"].length; i++)
            {
                // make title a link if there is extra data
                if ({{event_data|tojson}}["data"][i]["infourl"])
                {
                    var titlenode = document.createElement("a");
                    titlenode.className = "boldtxtlink";
                    titlenode.setAttribute("href", {{event_data|tojson}}["data"][i]["infourl"]);
                }
                else{
                    var titlenode = document.createElement("div");
                    titlenode.className = "boldtxt";
                }
                var eventtitle = document.createTextNode({{event_data|tojson}}["data"][i]["title"]);
                titlenode.appendChild(eventtitle);
                
                
                // given HTML tags
                var textnode = document.createElement("div");
                textnode.insertAdjacentHTML('beforeend', {{event_data|tojson}}["data"][i]["description"]);
                textnode.className = "txtblock";

                eventblock.appendChild(titlenode);
                eventblock.appendChild(textnode);
                var enter = document.createElement("br");
                eventblock.appendChild(enter);
            }
        }
        var element = document.getElementById("eventsbody");
        element.appendChild(eventblock);


        // NEWS RELEASES
        var newsblock = document.createElement("div");
        console.log({{news_data|tojson}});
        if ( {{news_data|tojson}}["total"] == 0)
        {
            var newstext = document.createTextNode("No news releases available for this park.");
            newsblock.appendChild(eventtext);
        }
        else {
            for (i = 0; i < {{news_data|tojson}}["data"].length; i++)
            {
                // make title a link if there is extra data
                if ({{news_data|tojson}}["data"][i]["url"])
                {
                    var titlenode = document.createElement("a");
                    titlenode.className = "boldtxtlink";
                    titlenode.setAttribute("href", {{news_data|tojson}}["data"][i]["url"]);
                }
                else{
                    var titlenode = document.createElement("div");
                    titlenode.className = "boldtxt";
                }
                // news title
                var newstitle = document.createTextNode({{news_data|tojson}}["data"][i]["title"]);
                titlenode.appendChild(newstitle);
                
                // release date
                var textnode = document.createElement("div");
                var newsdate = document.createTextNode({{news_data|tojson}}["data"][i]["releasedate"]);
                var format = document.createTextNode(":  ");
                textnode.appendChild(newsdate);
                textnode.appendChild(format);

                // abstract
                var newstext = document.createTextNode({{news_data|tojson}}["data"][i]["abstract"]);
                textnode.className = "txtblock";
                textnode.appendChild(newstext);

                newsblock.appendChild(titlenode);
                newsblock.appendChild(textnode);
                var enter = document.createElement("br");
                newsblock.appendChild(enter);
            }
        }
        var element = document.getElementById("newsbody");
        element.appendChild(newsblock);
        
    </script>
    {% endblock %}
  </body>
</html>