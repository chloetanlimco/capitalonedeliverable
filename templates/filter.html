<!DOCTYPE html>
<html lang = "en">
<head> 
       
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advanced Search</title>
    <link rel="stylesheet" href="../static/css/filter_style.css">
    <script src="../static/js/advsearch.js"></script>

</head>
<body>
    {% extends "template.html" %}
    {% block content %}
    <div id="spacing">
        <div id="sidebar">
            <!-- Search form -->
            <input id="searchbar" class="form-control" type="text" placeholder="name, keyword search" name="searchterms" aria-label="Search">

            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a style="color: #343a40" data-toggle="collapse" href="#test">States</a>
                    </div>
                    <div id="test" class="panel-collapse collapse">
                        <ul class="list-group" id="list"></ul>
                    </div>
                </div>
            </div>

            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                            <a style="color: #343a40" data-toggle="collapse" href="#test2">Designations</a>
                    </div>
                    <div id="test2" class="panel-collapse collapse">
                        <ul class="list-group">
                            <li id="listbox" class="list-group-item">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="Park">
                                    <label id="listtxt" class="custom-control-label" for="Park">Default unchecked</label>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <button id="srchbtn" onclick="reloadUpdated();" value='submit' type="button" class="btn btn-dark">Update Search</button>
        </div>
        <div id="maincontent">
            <script>
                var stateArray = {{all_states|safe}};
                var selectedStates = {{curr_states|safe}};
                var numentries = {{numentries}};
                var imgArray = {{imgArray|safe}};
                var data = {{value|tojson}};

                function build()
{
    for (i = 0; i < numentries; i++) {
        var img = document.createElement("IMG");
        img.setAttribute("src", String(imgArray[i]));
        img.id = "icon";

        var panel = document.createElement("div");
        var park_code = data[i]["parkCode"];
        panel.id = park_code;
        panel.className = "resultblock";
        panel.setAttribute("action", "/about");
        panel.setAttribute("method", "post");
        // creates unique link and redirects users
        panel.setAttribute("onclick", "window.location.href=redirect_to_park(this.id)");

        // title: full name of park
        var text = document.createElement("h5");
        var node = document.createTextNode(data[i]['fullName']);
        text.appendChild(node);
        text.id = "desblock";

        // states + designations
        var info = document.createElement("p");
        var state_title = document.createTextNode("States: ");
        var state = document.createTextNode(data[i]['states']);
        var enter = document.createElement("br");
        var designation_title = document.createTextNode("Designation: ");
        var designation = document.createTextNode(data[i]['designation']);
        info.appendChild(state_title);
        info.appendChild(state);
        info.appendChild(enter);
        info.appendChild(designation_title);
        info.appendChild(designation);
        info.id = "desblock";

        // description
        var descriptionblock = document.createElement("p");
        var des = document.createTextNode(data[i]['description']);
        descriptionblock.id = "desblock";
        descriptionblock.append(des);

        // add to panel div
        panel.append(img);
        panel.append(text);
        panel.append(info);
        panel.append(descriptionblock);

        var element = document.getElementById("maincontent");
        element.appendChild(panel);
    }
}
build();
            </script>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    </div>
    {% endblock %}
  </body>
</html>
